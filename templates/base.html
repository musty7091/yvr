<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}YENİ VİZYON{% endblock %}</title>
    <!-- Modern & Hafif Yazı Tipi -->
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">
    <style>
        :root {
            --yvr-bg: #fdfdfd;
            --yvr-card-bg: #ffffff;
            --yvr-primary: #a2d2ff; /* Pastel Mavi */
            --yvr-secondary: #bde0fe;
            --yvr-accent: #ffafcc; /* Pastel Pembe */
            --yvr-text: #576574;
            --yvr-text-dark: #2c3e50;
        }
        
        body { 
            background-color: var(--yvr-bg); 
            font-family: 'Outfit', sans-serif; 
            color: var(--yvr-text);
            font-weight: 400;
            line-height: 1.6;
        }

        /* Bold Yazıları Yumuşat */
        h1, h2, h3, h4, h5, .fw-bold { 
            font-weight: 500 !important; 
            color: var(--yvr-text-dark);
        }

        .navbar-yvr { 
            background-color: white; 
            border-bottom: 1px solid #f1f1f1; 
            padding: 1rem 0;
        }

        .navbar-brand img { 
            height: 40px; 
            width: auto; 
            filter: grayscale(20%);
        }
        
        .nav-link { 
            color: var(--yvr-text) !important; 
            font-size: 0.95rem;
            margin: 0 5px;
            transition: all 0.3s;
        }
        .nav-link:hover { color: var(--yvr-primary) !important; }

        .card-custom { 
            background: var(--yvr-card-bg); 
            border-radius: 20px; 
            border: none; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.02);
            padding: 1.5rem;
        }

        .btn-yvr-primary { 
            background-color: var(--yvr-primary); 
            color: #4a6fa5; 
            border-radius: 12px; 
            border: none; 
            padding: 12px 25px;
            font-weight: 500;
            transition: transform 0.2s;
        }
        .btn-yvr-primary:hover { transform: translateY(-2px); background-color: var(--yvr-secondary); }

        .table { --bs-table-bg: transparent; }
        .table thead th { 
            font-weight: 500; 
            text-transform: uppercase; 
            font-size: 0.75rem; 
            letter-spacing: 1px; 
            color: #a0a0a0;
            border: none;
        }
        .table td { border-bottom: 1px solid #f8f9fa; padding: 15px 10px; font-weight: 300; }

        /* Pastel Rozetler */
        .badge-pastel-blue { background-color: #d0ebff; color: #1971c2; }
        .badge-pastel-green { background-color: #e3fafc; color: #0b7285; }

        /* Flash (soft) */
        .yvr-alert {
            border: 0;
            border-radius: 16px;
            padding: 14px 16px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.04);
            font-weight: 400;
        }
        .yvr-alert.alert-success { background: #ecfdf3; color: #14532d; }
        .yvr-alert.alert-warning { background: #fff7ed; color: #7c2d12; }
        .yvr-alert.alert-danger  { background: #fff1f2; color: #7f1d1d; }
        .yvr-alert.alert-info    { background: #eff6ff; color: #1e3a8a; }

        /* Scrollbar */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f1f1; }
        ::-webkit-scrollbar-thumb { background: #d1d1d1; border-radius: 10px; }
    </style>
    <meta name="csrf-token" content="{{ csrf_token() }}">

</head>
<body>

<nav class="navbar navbar-expand-lg navbar-yvr sticky-top">
    <div class="container">
        <a class="navbar-brand d-flex align-items-center" href="/">
            <img src="/static/logo.png" alt="YVR Logo" onerror="this.src='https://via.placeholder.com/40x40?text=YVR'">
            <span class="ms-3 fw-bold text-dark" style="letter-spacing: 1px;">YENİ VİZYON REKLAM</span>
        </a>
        <button class="navbar-toggler border-0" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
            <span class="bi bi-list fs-2"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
            <ul class="navbar-nav ms-auto align-items-center">
                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('genel.index') }}">
                        <i class="bi bi-house-heart me-1"></i> Ana Sayfa
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('musteri.musteriler') }}">
                        <i class="bi bi-people me-1"></i> Müşteriler
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link text-dark fw-bold" href="{{ url_for('genel.kasa_banka_yonetimi') }}">
                        <i class="bi bi-bank me-1"></i> Banka & Kasa 
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('gider.giderler') }}">
                        <i class="bi bi-wallet2 me-2"></i> Giderler
                    </a>
                </li>

                <li class="nav-item">
                    <a class="nav-link" href="{{ url_for('genel.ayarlar') }}">
                        <i class="bi bi-gear me-1"></i> Ayarlar
                    </a>
                </li>

                <li class="nav-item ms-lg-3">
                    <a class="btn btn-light btn-sm px-4 rounded-pill text-danger" href="{{ url_for('genel.logout') }}" style="font-size: 0.8rem;">
                        GÜVENLİ ÇIKIŞ
                    </a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container py-5">
    <div class="container mt-3">
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }} yvr-alert alert-dismissible fade show" role="alert" data-autoclose="true">
                {{ message }}
                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
            </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
    </div>
    {% block content %}{% endblock %}
</div>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script>
(function () {
    const meta = document.querySelector('meta[name="csrf-token"]');
    const token = meta ? meta.getAttribute('content') : null;
    if (!token) return;

    document.querySelectorAll('form[method="post"], form[method="POST"]').forEach(form => {
        if (form.querySelector('input[name="csrf_token"]')) return;

        const input = document.createElement('input');
        input.type = 'hidden';
        input.name = 'csrf_token';
        input.value = token;
        form.prepend(input);
    });
})();

(function () {
    // Varsayılan süre: 4500ms (istersen 2500/6000 yap)
    const AUTO_CLOSE_MS = 4500;

    document.querySelectorAll('.alert[data-autoclose="true"]').forEach(el => {
        window.setTimeout(() => {
            try {
                const alert = bootstrap.Alert.getOrCreateInstance(el);
                alert.close();
            } catch (e) {
                // Bootstrap yoksa sessiz geç
            }
        }, AUTO_CLOSE_MS);
    });
})();
</script>
</body>
</html>
